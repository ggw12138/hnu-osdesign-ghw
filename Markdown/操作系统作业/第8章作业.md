# 第八章作业 智能1801 古浩为

## 第一题

**外部碎片：**
    外部碎片指的是还没有被分配出去（不属于任何进程），但由于太小了无法分配给申请内存空间的新进程的内存空闲区域。外部碎片是出于任何已分配区域或页面外部的空闲存储块。这些存储块的总和可以满足当前申请的长度要求，但是由于它们的地址不连续或其他原因，使得系统无法满足当前申请。多道可变连续分配只有外部碎片。

**内部碎片：**
    内部碎片就是已经被分配出去（能明确指出属于哪个进程）却不能被利用的内存空间；内部碎片是处于区域内部或页面内部的存储块。占有这些区域或页面的进程并不使用这个存储块。而在进程占有这块存储块时，系统无法利用它。直到进程释放它，或进程结束时，系统才有可能利用这个存储块。单道连续分配只有内部碎片。多道固定连续分配既有内部碎片，又有外部碎片。

## 第二题

1. 页表在内存里面，所以要先访问一次内存查找到页表中的物理地址，然后通过物理地址再访问内存最终找到需要的值。一共要访问两次内存。所以总时间是400ns。

2. 有效时间的计算：按照命中率的百分比，分为命中情况下所需的时间和不命中情况下所需的时间之和。

   命中：访问TLB(10ns)，访问物理地址取出数据(200ns),$90%*(10ns+200ns)=189ns$
   不命中：访问TLB(10ns),访问内存(查找页表(200ns)和访问物理地址取出数据(200ns)),$10%*(200ns+200ns+10ns)=41ns$
   有效时间：$189ns+41ns=230ns$

## 第三题

1. 段号为0，基址为219，长度为600，访问第120位的物理地址空间。$600>120$,合法，所以物理地址为$219+120=339$

2. 段号为1，基址为2300，长度为14，访问第120位物理地址空间。$14<120$,非法，不能访问。

3. 段号为2，基址为90，长度为100，访问第120位物理地址空间。$100<120$,非法，不能访问。

4. 段号为3，基址为1327，长度为580，访问第120位物理地址空间。$580>120$,合法，所以物理地址为$1327+120=1447$

5. 段号为4，基址为1952,长度为96，访问第120位物理地址空间。$96<120$,非法，不能访问。

## 第四题

页大小为$1M=2^20B$,页偏移为20位。

所以逻辑地址中的P为28位，物理地中的f为28位。

由于每级页表大小不能超过$1K=2^10$,所以28位要分成$28=10+10+8$三级页表。

通过找到P1找到第一级页表中对应的指针，再通过P2找到第二级页表中对应的指针，再通过P3找到响应的物理地址f片段，根据f片段和页偏移d得到我们的物理地址。

## 第五题

