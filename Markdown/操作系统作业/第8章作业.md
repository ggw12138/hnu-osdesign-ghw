# 第八章作业 智能1801 古浩为

## 第一题

**外部碎片：**
    外部碎片指的是还没有被分配出去（不属于任何进程），但由于太小了无法分配给申请内存空间的新进程的内存空闲区域。外部碎片是出于任何已分配区域或页面外部的空闲存储块。这些存储块的总和可以满足当前申请的长度要求，但是由于它们的地址不连续或其他原因，使得系统无法满足当前申请。多道可变连续分配只有外部碎片。

**内部碎片：**
    内部碎片就是已经被分配出去（能明确指出属于哪个进程）却不能被利用的内存空间；内部碎片是处于区域内部或页面内部的存储块。占有这些区域或页面的进程并不使用这个存储块。而在进程占有这块存储块时，系统无法利用它。直到进程释放它，或进程结束时，系统才有可能利用这个存储块。单道连续分配只有内部碎片。多道固定连续分配既有内部碎片，又有外部碎片。

## 第二题

1. 页表在内存里面，所以要先访问一次内存查找到页表中的物理地址，然后通过物理地址再访问内存最终找到需要的值。一共要访问两次内存。所以总时间是400ns。

2. 有效时间的计算：按照命中率的百分比，分为命中情况下所需的时间和不命中情况下所需的时间之和。

   命中：访问TLB(10ns)，访问物理地址取出数据(200ns),$90%*(10ns+200ns)=189ns$
   不命中：访问TLB(10ns),访问内存(查找页表(200ns)和访问物理地址取出数据(200ns)),$10%*(200ns+200ns+10ns)=41ns$
   有效时间：$189ns+41ns=230ns$

## 第三题

1. 段号为0，基址为219，长度为600，访问第120位的物理地址空间。$600>120$,合法，所以物理地址为$219+120=339$

2. 段号为1，基址为2300，长度为14，访问第120位物理地址空间。$14<120$,非法，不能访问。

3. 段号为2，基址为90，长度为100，访问第120位物理地址空间。$100<120$,非法，不能访问。

4. 段号为3，基址为1327，长度为580，访问第120位物理地址空间。$580>120$,合法，所以物理地址为$1327+120=1447$

5. 段号为4，基址为1952,长度为96，访问第120位物理地址空间。$96<120$,非法，不能访问。

## 第四题

页大小为$1M=2^{20}B$,页偏移为20位。

所以逻辑地址中的P为28位，物理地中的f为28位。

由于每级页表大小不能超过$1K=2^{10}B$,所以28位要分成$28=10+10+8$三级页表。

通过找到P1找到第一级页表中对应的指针，再通过P2找到第二级页表中对应的指针，再通过P3找到响应的物理地址f片段，根据f片段和页偏移d得到我们的物理地址。

## 第五题

请求分段内存管理概述: 在请求分段存储管理系统中，作业运行之前，只要求将当前需要的若干个分段装入内存，便可启动作业运行。在作业运行过程中，如果要访问的分段不在内存中，则通过调段功能将其调入，同时还可以通过置换功能将暂时不用的分段换出到外存，以便腾出内存空间。

段表机制:
|段名|段长|段的基址|存取方式|访问字段A|修改位M|存在位P|增补位|外存始址|
|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
A:记录被访问的频繁程度
M:是否被修改过
P:在内存中是否存在
增补位:是否做过动态增长
外存地址:表示该段在外存中的起始地址

缺段中断的处理过程如图：（网图）
![缺段中断的处理](D:/VSCode/code/Markdown/操作系统/缺段处理.png)

请求分段系统中地址变换机构是在分段系统地址变换机构的基础上形成的。如下图所示：(网图)
![地址变换机构](D:/VSCode/code/Markdown/操作系统/地址变换机构.png)

## 第六题

1. LRU置换：

|7|2|3|1|4|5|7|7|8|2|4|6|5|2|1|0|4|6|
|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
|7|7|7|1|1|1|7|7|7|2|2|2|5|5|5|0|0|0|
| |2|2|2|4|4|4|7|7|7|4|4|4|2|2|2|4|4|
| | |3|3|3|5|5|5|8|8|8|6|6|6|1|1|1|6|

发生了18次页错误
2. FIFO置换：

|7|2|3|1|4|5|7|7|8|2|4|6|5|2|1|0|4|6|
|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
|7|7|7|1|1|1|7|7|7|2|2|2|5|5|5|0|0|0|
| |2|2|2|4|4|4|7|7|7|4|4|4|2|2|2|4|4|
| | |3|3|3|5|5|5|8|8|8|6|6|6|1|1|1|6|

发生了18次页错误
3. 最优置换：

|7|2|3|1|4|5|7|7|8|2|4|6|5|2|1|0|4|6|
|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
|7|7|7|7|7|7| | |8| | |6|5| |1|0| |6|
| |2|2|2|2|2| | |2| | |2|2| |2|2| |2|
| | |3|1|4|4| | |4| | |4|4| |4|4| |4|

发生了12次页错误
